{% extends "./generic.html" %}

{% block content %}
<div class="card mt-4 m-4 border-0">
    <div class="p-3 ps-4 pe-4 card-header bg-dark text-white d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
      <h2>Edit Event</h2>
        </div>
    <div class="card-body rounded border-0 p-4 bg-light">

      <form method="POST" enctype="multipart/form-data" class="p-4 mx-auto" style="max-width: 600px;">
    {% csrf_token %}

    <div class="form-group mb-3">
        {{ form.name.label_tag }}
        {{ form.name }}
        {% if form.name.errors %}
                    <div class="text-danger">
                        {% for error in form.name.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
    </div>

    <div class="form-group mb-3">
        {{ form.start_datetime.label_tag }}
        {{ form.start_datetime }}
        {% if form.start_datetime.errors %}
                    <div class="text-danger">
                        {% for error in form.start_datetime.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
    </div>

    <div class="form-group mb-3">
        {{ form.end_datetime.label_tag }}
        {{ form.end_datetime }}
        {% if form.end_datetime.errors %}
                    <div class="text-danger">
                        {% for error in form.end_datetime.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
    </div>

    <div class="form-group mb-3">
        {{ form.location.label_tag }}
        {{ form.location }}
        {% if form.location.errors %}
                    <div class="text-danger">
                        {% for error in form.location.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
    </div>

    <div class="form-group mb-3">
    {% if form.organization.errors %}
    <div class="text-danger">
        {% for error in form.organization.errors %}
            <p>{{ error }}</p>
        {% endfor %}
    </div>
{% endif %}
    </div>

    <div class="form-group mb-3">
    {{ form.image.label_tag}}
      <div>{{ form.image }}</div>
</div>
    <div class="form-group mb-3">
        {{ form.sponsor.label_tag }}
        {{ form.sponsor }}
    </div>
    <div class="form-group mb-3">
        {{ form.deliverable.label_tag }}
        {{ form.deliverable }}
    </div>

        <button type="submit" class="btn btn-success">Save Changes</button>
          {%if organization%}
        <a href="{% url 'projects:members_org_events' organization.id %}" class="btn btn-danger">Cancel</a>
          {%else%}
          <a href="{% url 'projects:user_events_list' %}" class="btn btn-danger">Cancel</a>

          {%endif%}
</form>
    </div>
    <div class="card-footer bg-dark">

    </div>
</div>

<!-- Flatpickr CSS and JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
    flatpickr(".datetimepicker", {
        enableTime: true,           // Allow both date and time selection
        dateFormat: "Y-m-d h:i K",  // Format for date and time with AM/PM
        time_24hr: false,           // Use 12-hour time format
        minuteIncrement: 15         // 15-minute increments for time
    });
</script>
{% endblock %}
